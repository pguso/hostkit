{% extends 'AvroStripeBundle::layout.html.twig' %}
{% block content %}
    <div class="page-header">
        <h1>New Plan</h1>
    </div>
    <form class="form-horizontal" action="{{ path('avro_stripe_coupon_new') }}" method="POST">
        {{ form_row(form.name) }}
        <div class="control-group">
            {{ form_label(form.percentOff) }}
            <div class="controls">
                <div class="input-append">
                    {{ form_widget(form.percentOff) }}
                    <span class="add-on">%</span>
                </div>
            </div>
        </div>
        {{ form_row(form.duration) }}
        <div id="durationInMonths" class="hide">
            {{ form_row(form.durationInMonths) }}
        </div>
        {{ form_row(form.maxRedemptions) }}
        <div class="control-group">
            {{ form_label(form.redeemBy) }}
            <div class="controls">
                <div class="bootstrap-datepicker input-append">
                    {{ form_widget(form.redeemBy) }}
                    <span class="add-on"><i class="icon-th"></i></span>
                </div>
            </div>
        </div>
        {{ form_widget(form._token) }}
        <div class="form-actions">
            <button type="submit" class="btn btn-large btn-primary"><i class="icon-ok icon-white"></i> Submit</button>
        </div>
    </form>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#avro_stripe_coupon_duration').change(function() {
                if ($(this).val() == 'repeating') {
                    $('#durationInMonths').show();
                } else {
                    $('#durationInMonths').hide();
                }
            }).trigger('change');
        });
    </script>
{% endblock %}

