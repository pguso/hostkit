(function (e) {
    e.fn.ctable = function (t) {
        var n = {sort: "asc", onSort: function () {
        }};
        var r = this;
        r.settings = {};
        var i = e(s), s = s, o = [], u = [];
        r.init = function () {
            r.settings = e.extend({}, n, t)
        };
        r.init();
        return this.each(function () {
            function i(t) {
                var n = 0;
                var i = 10;
                var s = r;
                var o = s.find("tbody tr:visible").length;
                if (t != "not") {
                    s.bind("repaginate", function () {
                        s.find("tbody tr").hide().slice(n * i, (n + 1) * i).show()
                    })
                } else {
                    s.bind("repaginate", function () {
                        s.find("tbody tr").hide();
                        s.find("tbody .result").slice(n * i, (n + 1) * i).show()
                    })
                }
                s.trigger("repaginate");
                var u = Math.ceil(o / i);
                var a = e('<div class="pager pagination pull-right"></div>');
                for (var f = 0; f < u; f++) {
                    e('<span class="page-number"></span>').text(f + 1).bind("click", {newPage: f},function (t) {
                        n = t.data["newPage"];
                        s.trigger("repaginate");
                        e(this).addClass("active").siblings().removeClass("active")
                    }).appendTo(a).addClass("clickable")
                }
                e(".pager").remove();
                //a.insertAfter(s).find("span.page-number:first").addClass("active");
                r.siblings('.widget-foot').find('.clearfix').before(a).find("span.page-number:first").addClass("active");

            }

            var t = r.settings.sort;
            var n = e("tbody > tr", r);
            n.sort(function (n, r) {
                var i = e("td:eq(0)", n).text();
                var s = e("td:eq(0)", r).text();
                if (t == "asc") {
                    return i > s ? 1 : 0
                } else {
                    return i < s ? 1 : 0
                }
            });
            e.each(n, function (e, t) {
                r.append(t)
            });
            i();
            r.siblings('.widget-foot').find('.pager').before('<input type="text" id="tblsearch" placeholder="Search in Table Entries..." class="form-control" />');
            e("#tblsearch").keyup(function () {
                e("table tbody tr").removeClass("result");
                if (e(this).val() != "") {
                    r.find("tbody tr").hide();
                    var t = e(this).val();
                    var n = jQuery.makeArray(r.find("tr td"));
                    e.each(n, function (n, r) {
                        if (e(r).text().indexOf(t) != -1) {
                            e(r).parent("tr").addClass("result").show()
                        }
                    });
                    i("not")
                } else {
                    e("table tbody tr").removeClass("result").show();
                    e("tbody tr").css("display", "table-row");
                    i("no-menu")
                }
            })
        })
    }
})(jQuery)